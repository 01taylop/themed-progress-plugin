import { getProgressConfig } from '../src/config'

jest.mock('chalk', () => ({
  bgWhite: jest.fn().mockImplementation(text => text),
  green: jest.fn().mockImplementation(text => text),
}))

describe('getProgressConfig', () => {

  test.each([
    ['2000-01-06', ['\u2588', ' ', 40]],
    ['2000-09-01', ['\u2588', ' ', 40]],
  ])('returns the default configuration when no event is found on %s', (date, expectedResult) => {
    jest.useFakeTimers().setSystemTime(new Date(date))

    const config = getProgressConfig()

    expect(config).toEqual(expectedResult)
  })

  test.each([
    ['2000-01-01', ['ðŸŽ‰', 'ðŸª©', 20]],
    ['2000-01-05', ['ðŸŽ‰', 'ðŸª©', 20]],
    ['2000-02-14', ['ðŸŒ¹', 'ðŸ¥€', 20]],
    ['2000-03-14', ['ðŸ¥§', 'ðŸ½ï¸', 20]],
    ['2000-03-17', ['ðŸ€', 'â¬œï¸', 20]],
    ['2000-04-01', ['ðŸƒ', 'ðŸ•³ï¸', 20]],
    ['2000-04-22', ['ðŸŒŽ', 'â¬œï¸', 20]],
    ['2000-05-04', ['â­ï¸', 'ðŸŒŒ', 20]],
    ['2000-05-20', ['ðŸ', 'ðŸŒ¸', 20]],
    ['2000-05-30', ['ðŸ¥”', 'â¬œï¸', 20]],
    ['2000-06-03', ['ðŸš²', 'â¬œï¸', 20]],
    ['2000-06-05', ['ðŸŒ³', 'â¬œï¸', 20]],
    ['2000-06-08', ['ðŸŒŠ', 'â¬œï¸', 20]],
    ['2000-06-19', ['â˜€ï¸', 'â˜ï¸', 20]],
    ['2000-06-23', ['â˜€ï¸', 'â˜ï¸', 20]],
    ['2000-07-04', ['ðŸŽ†', 'â¬›ï¸', 20]],
    ['2000-07-20', ['ðŸŒ', 'ðŸŒš', 20]],
    ['2000-09-05', ['ðŸ’–', 'ðŸ¤', 20]],
    ['2000-09-21', ['â˜®ï¸', 'â¬›ï¸', 20]],
    ['2000-10-01', ['â˜•ï¸', 'ðŸ•˜', 20]],
    ['2000-10-24', ['ðŸŽƒ', 'ðŸ¦‡', 20]],
    ['2000-10-31', ['ðŸŽƒ', 'ðŸ¦‡', 20]],
    ['2000-12-01', ['â›„ï¸', 'ðŸ§Š', 20]],
    ['2000-12-31', ['â›„ï¸', 'ðŸ§Š', 20]],
  ])('returns the correct configuration for events on %s', (date, expectedResult) => {
    jest.useFakeTimers().setSystemTime(new Date(date))

    const config = getProgressConfig()

    expect(config).toEqual(expectedResult)
  })

  test.each([
    ['2026-02-17', ['ðŸ´', 'ðŸ§§', 20]],
    ['2027-02-06', ['ðŸ', 'ðŸ§§', 20]],
    ['2028-01-26', ['ðŸ’', 'ðŸ§§', 20]],
    ['2029-02-13', ['ðŸ“', 'ðŸ§§', 20]],
    ['2030-02-03', ['ðŸ¶', 'ðŸ§§', 20]],
    ['2031-01-23', ['ðŸ·', 'ðŸ§§', 20]],
    ['2032-02-11', ['ðŸ€', 'ðŸ§§', 20]],
    ['2033-01-31', ['ðŸ‚', 'ðŸ§§', 20]],
    ['2034-02-19', ['ðŸ¯', 'ðŸ§§', 20]],
    ['2035-02-08', ['ðŸ°', 'ðŸ§§', 20]],
    // ['2026-02-17', ['ðŸ¥ž', 'ðŸ½ï¸', 20]],
    ['2027-02-09', ['ðŸ¥ž', 'ðŸ½ï¸', 20]],
    ['2028-02-29', ['ðŸ¥ž', 'ðŸ½ï¸', 20]],
    // ['2029-02-13', ['ðŸ¥ž', 'ðŸ½ï¸', 20]],
    ['2030-03-05', ['ðŸ¥ž', 'ðŸ½ï¸', 20]],
    ['2026-03-26', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2026-04-05', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2027-03-18', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2027-03-28', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2028-04-06', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2028-04-16', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2029-03-22', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2029-04-01', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2030-04-11', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2030-04-21', ['ðŸ£', 'ðŸ¥š', 20]],
    ['2026-06-29', ['ðŸŽ¾', 'â¬›ï¸', 20]],
    ['2026-07-12', ['ðŸŽ¾', 'â¬›ï¸', 20]],
    ['2027-06-28', ['ðŸŽ¾', 'â¬›ï¸', 20]],
    ['2027-07-11', ['ðŸŽ¾', 'â¬›ï¸', 20]],
    ['2025-11-26', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2025-11-27', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2026-11-25', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2026-11-26', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2027-11-24', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2027-11-25', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2028-11-22', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2028-11-23', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2029-11-21', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2029-11-22', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2030-11-27', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
    ['2030-11-28', ['ðŸ¦ƒ', 'ðŸ‚', 20]],
  ])('returns the correct configuration for year-specific events on %s', (date, expectedResult) => {
    jest.useFakeTimers().setSystemTime(new Date(date))

    const config = getProgressConfig()

    expect(config).toEqual(expectedResult)
  })

})
