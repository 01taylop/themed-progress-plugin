import chalk from 'chalk'

import { getProgressConfig } from '../src/config'

jest.mock('chalk', () => ({
  bgWhite: jest.fn().mockImplementation(text => text),
  green: jest.fn().mockImplementation(text => text),
}))

describe('getProgressConfig', () => {

  test.each([
    ['2000-01-01', ['🎉', '⬜️', 20]],
    ['2000-01-02', ['\u2588', ' ', 40]],
    ['2025-01-29', ['🐍', '⬜️', 20]],
    ['2000-02-14', ['🌹', '🥀', 20]],
    ['2025-03-04', ['🥞', '🍽️', 20]],
    ['2000-03-14', ['🥧', '🍽️', 20]],
    ['2000-03-17', ['🍀', '⬜️', 20]],
    ['2000-04-01', ['🃏', '⬜️', 20]],
    ['2025-04-10', ['🐣', '🥚', 20]],
    ['2025-04-20', ['🐣', '🥚', 20]],
    ['2000-04-22', ['🌎', '⬜️', 20]],
    ['2000-05-04', ['⭐️', '⬜️', 20]],
    ['2000-05-20', ['🐝', '⬜️', 20]],
    ['2000-05-30', ['🥔', '⬜️', 20]],
    ['2000-06-03', ['🚲', '⬜️', 20]],
    ['2000-06-05', ['🌳', '⬜️', 20]],
    ['2000-06-08', ['🌊', '⬜️', 20]],
    ['2000-06-19', ['☀️', '☁️', 20]],
    ['2000-06-23', ['☀️', '☁️', 20]],
    ['2000-07-04', ['🎆', '⬜️', 20]],
    ['2000-07-20', ['🌝', '🌚', 20]],
    ['2024-07-01', ['🎾', '⬜️', 20]],
    ['2024-07-14', ['🎾', '⬜️', 20]],
    ['2000-09-05', ['💖', '🤍', 20]],
    ['2000-09-21', ['☮️', '⬜️', 20]],
    ['2000-10-01', ['☕️', '⬜️', 20]],
    ['2000-10-24', ['🎃', '🦇', 20]],
    ['2000-10-31', ['🎃', '🦇', 20]],
    ['2024-11-28', ['🦃', '🍂', 20]],
    ['2000-12-01', ['⛄️', '🧊', 20]],
    ['2000-12-31', ['⛄️', '🧊', 20]],
  ])('returns the correct configuration for %s', (date, expectedResult) => {
    jest.useFakeTimers().setSystemTime(new Date(date))

    const config = getProgressConfig()

    expect(config).toEqual(expectedResult)
  })

})
